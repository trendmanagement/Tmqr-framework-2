.. _framework-introduction:

===================================
Framework introduction (start here)
===================================

:ref:`index-page`

.. toctree::
    :maxdepth: 2

Introduction
++++++++++++
This framework has been designed to be as developer friendly as possible. As a developer you should learn and master few
concepts which will help you to build Indexes and Alphas using full strength of tools.

Data and position
~~~~~~~~~~~~~~~~~
To become fluent in the framework's indexes and alphas development you have to master only 2 core classes.

* All aspects of data management are build based on Pandas package, typically all quotes and price series are `Pandas.DataFrames <https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html>`_
  All access to data is provided by :ref:`datamanager-class`, probably this is a core of entire framework.

* All indexes and alphas are using :ref:`position-class` to build, manage and make calculations.



DataManager
+++++++++++
The class which is manages everything. You can always refer to autogenerated information about :ref:`datamanager-class`.

In this section you will find description of common DataManager applications.


Setting quotes series
~~~~~~~~~~~~~~~~~~~~~
The main purpose of the DataManager class is to get the quotes data for particular instrument or index from the DB.
There are 2 main ways to set the data ``datamanager.series_primary_set(...)`` and ``series_extra_set(...)``. Primary series
are used for initiation of data series, you **must call** ``series_primary_set(...)`` every time, because datetime series of
primary quotes is used as anchor for extra series (a.k.a. secondary series) or position calculation.

To set up primary quotes you have to use one of the :ref:`quote-modules` by the following way::

    # To set continuous futures index for 'US.ES' instrument with decision_time_shift (for index usage)
    self.dm.series_primary_set(QuoteContFut, 'US.ES', timeframe='D')
                               # decision_time_shift=self.decision_time_shift) # This setting is optional for alphas and required for indexes!


    # To set pre-saved index series as primary quotes and series
    self.dm.series_primary_set(QuoteIndex, "US.ES_ContFut", set_session=True, check_session=True)


To set up secondary quotes you have to call series_extra_set(...) with one of the :ref:`quote-modules`, also you need
to define key-name for secondary quotes series that will be used for quotes access later::

    # To set continuous futures index for 'US.CL' instrument with decision_time_shift (for index usage)
    self.dm.series_extra_set('secondary_future_key_name', QuoteContFut, 'US.CL', timeframe='D')
                             # decision_time_shift=self.decision_time_shift) # This setting is optional for alphas and required for indexes!

    # To set pre-saved index series as secondary quotes and series
    self.dm.series_extra_set('secondary_index_key_name', QuoteIndex, "US.ES_Fancy_SmartEXO_Index", set_session=True, check_session=True)



.. note:: * You must always define ``datamanager.series_primary_set(...)``
          * You must always call ``datamanager.session_set()`` before quotes initiation
          * Extra (a.k.a. secondary) series already aligned to the primary series by date
          * You must define ``decision_time_shift`` argument when you are working on index, and mustn't in case of alpha development
